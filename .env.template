# ==============================================================================
# Environment variables for Medical AI Hospital
# Copy this file to ".env" at the repo root and customize values.
# Do NOT commit the resulting ".env" to version control.
# ==============================================================================

# ------------------------------------------------------------------------------
# System
# ------------------------------------------------------------------------------
TZ=UTC

# ------------------------------------------------------------------------------
# Port bindings (change if these ports are in use on your host)
# ------------------------------------------------------------------------------
DB_PORT=5432
MCP_PORT=9090
GATEWAY_PORT=8080
FRONTEND_PORT=3000

# ------------------------------------------------------------------------------
# Database credentials (used by db, mcp, and gateway)
# Must match what your init SQL expects (db/10_init.sql).
# ------------------------------------------------------------------------------
POSTGRES_USER=mcp_user
POSTGRES_PASSWORD=mcp_password
POSTGRES_DB=medical_db

# Service DSN used by gateway (and optionally MCP).
# NOTE: .env files do NOT expand ${VAR} placeholders. Keep this explicit.
DATABASE_URL=postgresql://mcp_user:mcp_password@db:5432/medical_db

# ------------------------------------------------------------------------------
# Service secrets
# ------------------------------------------------------------------------------
# Generate a strong 32+ char string (example: `openssl rand -hex 32`)
COOKIE_SECRET=change-me-please-this-is-not-a-secure-secret

# Shared bearer token for the MCP HTTP shim. Gateway must send the same token.
MCP_BEARER_TOKEN=dev-token-replace-with-real-secret

# ------------------------------------------------------------------------------
# Logging levels
# ------------------------------------------------------------------------------
UVICORN_LOG_LEVEL=info
MCP_LOG_LEVEL=INFO

# ------------------------------------------------------------------------------
# Gateway CORS & sessions
# ------------------------------------------------------------------------------
# ALLOWED_ORIGINS can be:
#   - JSON array string: ["http://localhost:3000","http://127.0.0.1:3000"]
#   - OR CSV string: http://localhost:3000,http://127.0.0.1:3000
ALLOWED_ORIGINS=["http://localhost:3000"]
ALLOW_CREDENTIALS=true

SESSION_COOKIE_NAME=sid
SESSION_TTL_SECONDS=2592000
SESSION_SAMESITE=lax
# In production behind HTTPS, set this to true so cookies are Secure-only.
SESSION_SECURE_COOKIES=false

# ------------------------------------------------------------------------------
# Frontend (Next.js)
# ------------------------------------------------------------------------------
# Browser-visible API base for the gateway. Must be reachable from the userâ€™s machine.
NEXT_PUBLIC_API_BASE=http://localhost:8080
# If the value contains spaces, keep it quoted.
NEXT_PUBLIC_APP_NAME="Medical AI Portal"

# ------------------------------------------------------------------------------
# Password reset links & SMTP (email)
# ------------------------------------------------------------------------------
# Base URL used when generating password reset links sent by email.
FRONTEND_BASE_URL=http://localhost:3000

# SMTP provider settings (example below is SendGrid; customize for your provider)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=***redacted***
SMTP_STARTTLS=true
MAIL_FROM=no-reply@yourdomain.com

# How long a password reset link is valid (in seconds)
PASSWORD_RESET_TTL_SECONDS=3600
